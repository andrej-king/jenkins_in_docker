version: '3.9'

services:
    jenkins:
        image: jenkinsci/blueocean
        ports:
            - "8000:8080"
        environment:
            DOCKER_HOST: tcp://docker:2376
        volumes:
            - jenkins-data:/var/jenkins_home
        depends_on:
            - jenkins-docker

    jenkins-docker:
        image: docker:dind
        privileged: true

volumes:
    jenkins-data:
